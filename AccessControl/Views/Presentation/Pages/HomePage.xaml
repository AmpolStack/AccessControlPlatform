<Page x:Class="AccessControl.Views.Pages.HomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:AccessControl.Views.Pages"
      xmlns:controls="clr-namespace:AccessControl.Views.Controls"
      xmlns:behavior="clr-namespace:AccessControl.Infraestructure.Common"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="HomePage"
      Background="Transparent"
      behavior:ViewLoadedBehavior.OnLoaded="{Binding LoadDataCommand}">

    <Grid Margin="20, 20, 20, 20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0">
            <TextBlock Foreground="{StaticResource AppBlackBrush}" 
                       FontWeight="{StaticResource InterSemiBoldWeight}" 
                       FontSize="25">Bienvenido!
            </TextBlock>
            <TextBlock Margin="10, 0, 0, 0" 
                       Foreground="{StaticResource AppBlueBrush}" 
                       FontWeight="{StaticResource InterSemiBoldWeight}" 
                       FontSize="25"
                       Text="{Binding UserName}"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Margin="0, 30" Grid.Row="1">
            <TextBlock FontSize="20" FontWeight="{StaticResource InterSemiBoldWeight}">Ultimo ingreso:</TextBlock>
            <TextBlock Margin="10, 0 ,0 ,0" 
                       FontSize="20" 
                       Text="{Binding LastAccessTime}"/>
        </StackPanel>

        <TextBlock Grid.Row="2"
                   Margin="0,0,0, 10" 
                   FontSize="20" 
                   Foreground="{StaticResource AppBlueBrush}" 
                   FontWeight="{StaticResource InterSemiBoldWeight}" 
                   TextDecorations="Underline">INGRESOS</TextBlock>

        <DataGrid Grid.Row="3"
                  AutoGenerateColumns="False"
                  HeadersVisibility="Column"
                  GridLinesVisibility="Horizontal"
                  Background="Transparent"
                  BorderThickness="0"
                  RowHeaderWidth="0"
                  IsReadOnly="True"
                  RowHeight="40"
                  ItemsSource="{Binding AccessRecords}"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  ScrollViewer.HorizontalScrollBarVisibility="Auto">

            <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridCell}">
                    <Setter Property="Padding" Value="10,0"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type DataGridCell}">
                                <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderThickness" Value="0"/>
                </Style>
            </DataGrid.Resources>

            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="FontWeight" Value="{StaticResource InterBoldWeight}"/>
                    <Setter Property="Padding" Value="10"/>
                    <Setter Property="BorderThickness" Value="0,0,0,1"/>
                    <Setter Property="BorderBrush" Value="#E5E5E5"/>
                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>

            <DataGrid.Columns>
                <DataGridTextColumn Header="FECHA" Binding="{Binding Fecha}" Width="*" />
                <DataGridTextColumn Header="HORA ENTRADA" Binding="{Binding Hora}" Width="*" />
                <DataGridTextColumn Header="HORA SALIDA" Binding="{Binding HoraSalida}" Width="*" />
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="4"
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="0, 15, 0, 0">
            <controls:StandardButtonControl ButtonType="Sober" 
                                            ButtonContent="Anterior"
                                            Command="{Binding PreviousPageCommand}"
                                            Margin="5, 0"/>

            <TextBlock Text="{Binding PaginationInfo}" 
                       VerticalAlignment="Center"
                       Margin="15, 0"
                       FontWeight="{StaticResource InterSemiBoldWeight}"/>

            <controls:StandardButtonControl ButtonType="Sober" 
                                            ButtonContent="Siguiente"
                                            Command="{Binding NextPageCommand}"
                                            Margin="5, 0"/>
        </StackPanel>

    </Grid>
</Page>
